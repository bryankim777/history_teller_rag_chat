문에, 백제 정벌 때와 달리 신라가 직접 군사 활동을 적극적으로 벌이지는 않았다. 이윽고 백제부흥운동
제압이 완료되고 본격적인 고구려 원정이 본격화 되었다. 668년(문무왕 8) 당의 대군이 고구려 공격을
추진하자, 문무왕도 김유신을 총사령관으로 하는 원정군을 편성하였다. 비록 김유신은 고령으로 출전하
지 않았지만, 그해 9월 신라 정예군은 당군과 함께 평양성을 함락하고 고구려를 멸망시켰다. 이로써 백
제와 고구려를 통합하는 삼국통일은 작은 완성을 이루었다. 그해 11월 문무왕은 백제와 고구려 평정을
선조 왕들을 모신 사당에 직접 고하여 삼국통일을 달성했음을 재확인한다.
하지만 신라 문무왕의 전쟁은 끝나지 않았다. 백제 멸망 이후 당이 그 땅을 차지한 것은 원래 나당 동맹
의 합의사항이었던 평양 이남의 땅을 신라가 차지한다는 약속을 지킬 의사가 없는 것은 물론, 신라까지
자신들의 영토로 삼으려는 의도를 보여준 것이다. 이에 문무왕은 당과의 마지막 일전을 준비하였다.
우선 안승(安勝)과 검모잠(劍牟岑)이 주도한 고구려부흥운동을 몰래 지원하여 당군에 타격을 주었고,
당이 고구려 전역을 완전히 장악하지 못하도록 하였다. 그리고 당군에 밀려 망명해 온 고구려부흥세력
을 지금의 전북 익산시 지역에 해당하는 금마저(⾦⾺渚)에 머물게 하면서 보덕국(報德國)을 세우게 하